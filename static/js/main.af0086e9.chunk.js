(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{289:function(e,t,n){e.exports=n(577)},464:function(e,t,n){},519:function(e,t,n){},522:function(e,t,n){},569:function(e,t,n){},575:function(e,t,n){},577:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),l=n(19),c=n.n(l),i=n(26),s=n(74),o=n(280),u=n(13);var m={count:null,matrix:[],classes:[],stats:{micro:{},macro:{}}},f={recall:"Recall",precision:"Precision",accuracy:"Accuracy",f1:"F1-score",mcc:"MCC-score"};function d(e){var t=e.tp,n=e.fn,a=e.fp,r=e.tn;return{accuracy:1*(t+r)/(t+n+a+r),precision:1*t/(t+a)||0,recall:1*t/(t+n)||0,f1:2*t/(2*t+a+n),mcc:(t*r-a*n)/Math.sqrt((t+a)*(t+n)*(r+a)*(r+n))||0}}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONFUSION_LOAD":var n=t.payload.trim().split("\n").map(function(e){return e.split(" ").map(function(e){return parseInt(e,10)})}),a=n.slice(-1)[0].slice(-1)[0],r=n.slice(1,-1).map(function(e){return e.slice(1,-1)}),l=function(e){var t=e.count,n=e.matrix,a=e.labels,r=e.actual,l=e.predicted;return a.map(function(e,a){var c=r[a],i=t-c,s=n[a][a],o=c-s,m=l[a]-s,f=i-m;return Object(u.a)({idx:a,label:e,tp:s,fp:m,tn:f,fn:o},d({tp:s,fp:m,tn:f,fn:o}))})}({count:a,matrix:r,labels:n[0].slice(1,-1),actual:n.slice(1,-1).map(function(e){return e.slice(-1)[0]}),predicted:n.slice(-1)[0].slice(1,-1)}),c=function(e){e.count;var t=e.classes,n={accuracy:0,precision:0,recall:0,f1:0,mcc:0};return t.forEach(function(e){Object.keys(n).forEach(function(t){return n[t]+=e[t]})}),Object.keys(n).forEach(function(e){return n[e]/=t.length}),n}({count:a,classes:l}),i=function(e){e.count;var t=e.classes,n={tp:0,fn:0,fp:0,tn:0};return t.forEach(function(e){Object.keys(n).forEach(function(t){return n[t]+=e[t]})}),Object(u.a)({},n,d(n))}({count:a,classes:l});return{count:a,matrix:r,classes:l,stats:{micro:i,macro:c}};default:return e}}var h=new Map;function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LABELS_LOAD":var n=new Map;return t.payload.trim().split("\n").forEach(function(e){var t=e.indexOf(" "),a=parseInt(e.slice(0,t),10),r=e.slice(t+1).trim();n.set(a,r)}),n;default:return e}}var E=n(75),O={status:!1,files:{}};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FILE_LOADING":var n=Object(u.a)({},e.files,Object(E.a)({},t.payload.id,{status:null,url:t.payload.url}));return Object(u.a)({},e,{status:null,files:n});case"FILE_LOADED":var a=Object(u.a)({},e.files,Object(E.a)({},t.payload.id,Object(u.a)({},e.files[t.payload.id],{status:!0})));return Object(u.a)({},e,{status:function(e){var t=Object.values(e).map(function(e){return e.status});return!t.includes(!1)&&(0!==t.length&&!t.includes(null)||null)}(a),files:a});case"FILE_FAILED":var r=Object(u.a)({},e.files,Object(E.a)({},t.payload.id,Object(u.a)({},e.files[t.payload.id],{status:!1})));return Object(u.a)({},e,{status:!1,files:r});default:return e}}var y=new Map;function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MODEL_LOAD":var n=new Map;return t.payload.trim().split("\n").forEach(function(e){var t=e.indexOf(" "),a=e.slice(0,t),r=e.slice(t+1);r&&("label"!==a&&"nr_sv"!==a&&"num_words"!==a&&"num_classes"!==a&&"total_params"!==a||(r=r.split(" ").map(function(e){return parseInt(e,10)})),"rho"===a&&(r=r.split(" ").map(function(e){return parseFloat(e)})),n.set(a,r))}),n;default:return e}}var j={sort:{key:"recall",reverse:!0}};function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONFIG_UPDATE_SORT":var n=t.payload,a=null!==n.reverse?n.reverse:n.key===e.sort.key!==e.sort.reverse;return Object(u.a)({},e,{sort:Object(u.a)({},n,{reverse:a})});default:return e}}var C=n(95),x=n.n(C),k=Object(s.c)({confusion:p,labels:b,files:v,model:g,config:w,windowSize:x.a}),_=Object(s.d)(k,Object(s.a)(o.a));_.dispatch(Object(C.createSizeAction)(window)),_.dispatch(Object(C.createRemAction)(window)),Object(C.listenResize)(_,window,100);var L=_,N=n(250),D=n(164),S=n(36),I=n(20),A=n(21),F=n(24),M=n(22),R=n(23),H=n(579),z=n(580),P=n(581),U=n(592),T=n(582),W=n(583),G=n(76),B=(n(464),{labels:"Category labels",confusion:"Confusion matrix",items:"Training data",model:"Model properties"}),q=function(e){var t=e.status;return!0===t?r.a.createElement(H.a,{glyph:"ok",className:"text-success"}):!1===t?r.a.createElement(H.a,{glyph:"remove",className:"text-danger"}):r.a.createElement(H.a,{glyph:"refresh",className:"text-muted spinning"})},J=function(e){function t(){return Object(I.a)(this,t),Object(F.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.files,n=e.title,a=(e.dispatch,Object(S.a)(e,["files","title","dispatch"]));return r.a.createElement(z.a,Object.assign({title:r.a.createElement("span",null,r.a.createElement(q,{status:t.status})," ",n)},a),Object.keys(t.files).map(function(e){var n=t.files[e];return r.a.createElement(P.a,{key:e,title:n.url},r.a.createElement(q,{status:n.status})," ",r.a.createElement("span",{className:"FileDesc"},B[e]||r.a.createElement("tt",null,e)),r.a.createElement("span",{className:"FileName"},n.url&&n.url.split("/").reverse()[0]))}))}}]),t}(a.Component),V=Object(i.b)(function(e){return{files:e.files}})(J),Y=function(e){function t(){return Object(I.a)(this,t),Object(F.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(U.a,{fluid:!0,inverse:!0},r.a.createElement(U.a.Header,null,r.a.createElement(U.a.Brand,null,"MLC-Eval"),r.a.createElement(U.a.Toggle,null)),r.a.createElement(U.a.Collapse,null,r.a.createElement(T.a,null,r.a.createElement(G.IndexLinkContainer,{to:"/"},r.a.createElement(W.a,null,"Summary")),r.a.createElement(G.LinkContainer,{to:"/categories"},r.a.createElement(W.a,null,"Categories")),r.a.createElement(G.LinkContainer,{to:"/confusion-matrix"},r.a.createElement(W.a,null,"Confusion Matrix"))),r.a.createElement(T.a,{pullRight:!0},r.a.createElement(W.a,{href:"https://github.com/q-m/mlc-eval#mlc-eval"},"Help"),r.a.createElement(V,{title:"Files",id:"nav-files-menu"})))),this.props.children)}}]),t}(a.Component),K=n(584),Q=n(585),X=n(586),Z=n(587),$=n(591),ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e?["accuracy","precision","recall"].includes(e)?function(e){return function(e){var t=e.value,n=e.digits;return isNaN(t)?null:r.a.createElement("span",null,(100*t).toFixed(n||0),r.a.createElement("span",{style:{fontSize:"75%",verticalAlign:"middle"}},"%"))}({value:e,digits:t})}:function(e){return function(e){var t=e.value,n=e.digits;return isNaN(t)?null:r.a.createElement("span",null,t.toFixed(n||1))}({value:e,digits:n})}:function(){return null}},te=(n(519),function(e){function t(){return Object(I.a)(this,t),Object(F.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.model,t=[];return e.forEach(function(e,n){"label"!==n&&"rho"!==n&&"nr_sv"!==n&&t.push(r.a.createElement("tr",{key:n},r.a.createElement("th",null,n),r.a.createElement("td",null,r.a.createElement("tt",null,e))))}),r.a.createElement(K.a,{className:"ModelParams no-head"},r.a.createElement("tbody",null,t))}}]),t}(a.PureComponent)),ne=function(e){function t(){return Object(I.a)(this,t),Object(F.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.stats,t=e.micro,n=e.macro;return r.a.createElement(K.a,{className:"CategoryStats no-head"},r.a.createElement("tbody",null,Object.keys(f).map(function(e){return r.a.createElement("tr",{key:e},r.a.createElement("th",null,f[e]),r.a.createElement("td",null,ee(e,1,2)(t[e])),r.a.createElement("td",null,ee(e,1,2)(n[e])))})),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("th",null,"micro avg."),r.a.createElement("th",null,"macro avg."))))}}]),t}(a.PureComponent),ae=function(e){var t=e.dot;return r.a.createElement("span",{className:"spinning text-muted inline-block"},t?"...":"?")},re=function(e){function t(){return Object(I.a)(this,t),Object(F.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.confusion,n=e.labels,a=e.files,l=e.model,c=t.classes.length,i=n.size;return r.a.createElement("div",{className:"Summary container"},r.a.createElement(Q.a,null,r.a.createElement("h2",null,"Classification evaluation ",r.a.createElement("small",null,"summary")),r.a.createElement("p",null,"You have trained with ",r.a.createElement("b",null,t.count||r.a.createElement(ae,null))," samples in ",r.a.createElement("b",null,c)," categories",i&&r.a.createElement("span",null," (out of ",r.a.createElement("b",null,i)," defined)"),".")),r.a.createElement(X.a,null,r.a.createElement(Z.a,{sm:4},r.a.createElement($.a,{header:r.a.createElement("h3",null,"Model parameters")},l.size>0?r.a.createElement(te,{model:l}):a.files.model?r.a.createElement("em",{className:"text-muted"},"Loading model ",r.a.createElement(ae,{dot:!0})):r.a.createElement("em",{className:"text-muted"},"Please load a model."))),r.a.createElement(Z.a,{sm:4},r.a.createElement($.a,{header:r.a.createElement("h3",null,"Statistics")},t.count?r.a.createElement(ne,{stats:t.stats}):a.files.confusion?r.a.createElement("em",{className:"text-muted"},"Loading confusion matrix ",r.a.createElement(ae,{dot:!0})):r.a.createElement("em",{className:"text-muted"},"Please load a confusion matrix.")))))}}]),t}(a.PureComponent),le=Object(i.b)(function(e){return{model:e.model,confusion:e.confusion,labels:e.labels,files:e.files}})(re),ce=n(588),ie=n(589),se=n(524),oe=n(590),ue=(n(522),function(e){function t(){return Object(I.a)(this,t),Object(F.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.stat,a=e.count,l=e.labels;return r.a.createElement("div",null,l.get(t)||t,r.a.createElement(ce.a,{style:n?{marginRight:"3.5em"}:null},a),r.a.createElement(ce.a,{className:"alert-info"},n))}}]),t}(a.PureComponent)),me=Object(i.b)(function(e){return{labels:e.labels}})(ue),fe=function(e){function t(){return Object(I.a)(this,t),Object(F.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.header,a=e.classes,l=e.getCount,c=e.href,i=e.stat,s=e.containerHeight,o=(e.dispatch,ee(i));return r.a.createElement($.a,null,r.a.createElement($.a.Heading,null,n),r.a.createElement(ie.a,{className:"CategoryList",style:{maxHeight:s-92}},a.map(function(e){return r.a.createElement(G.LinkContainer,{key:e.label,to:c(e.label)},r.a.createElement(se.a,{bsStyle:t?t===e.label?"success":"warning":null},r.a.createElement(me,{id:e.label,count:l(e),stat:o(e[i]),scope:t})))})))}}]),t}(a.PureComponent),de=Object(i.b)(function(e){var t=e.confusion.classes,n=e.config.sort,a=e.windowSize.height;return{classes:t,getCount:function(e){return e.tp+e.fn},stat:n.key,sort:n,containerHeight:a}},null,function(e,t,n){var a=e.classes,r=e.sort,l=Object(S.a)(e,["classes","sort"]),c=a.slice().sort(function(e,t){return(r.reverse?-1:1)*(e[r.key]-t[r.key])});return Object(u.a)({classes:c},l,t,n)})(fe),pe=Object(i.b)(function(e){return{labels:e.labels,confusion:e.confusion,containerHeight:e.windowSize.height}},null,function(e,t,n){e.labels;var a=e.confusion,r=e.containerHeight,l=a.classes.find(function(e){return e.label===n.id})||{},c=a.matrix[l.idx]||[],i=a.classes.filter(function(e,t){return c[t]>0});return i.sort(function(e,t){return-1*(c[e.idx]-c[t.idx])}),Object(u.a)({classes:i,getCount:function(e){return c[e.idx]},containerHeight:r},t,n)})(fe),he=function(e){function t(){return Object(I.a)(this,t),Object(F.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.sort,n=e.dispatch,a=e.match.params,l=a.ida;a.idb;return r.a.createElement(X.a,{className:"Categories"},r.a.createElement(Z.a,{sm:6,md:3},r.a.createElement(de,{header:r.a.createElement("div",null,r.a.createElement("div",{className:"pull-right"},r.a.createElement(oe.a,{id:"sort",bsStyle:"info",bsSize:"xsmall",title:f[t.key],pullRight:!0},Object.keys(f).map(function(e){return r.a.createElement(P.a,{key:e,onClick:function(){return n(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){n({type:"CONFIG_UPDATE_SORT",payload:{key:e,reverse:t}})}}(e))}},f[e])}))),"Actual"),href:function(e){return"/categories/".concat(e)}})),r.a.createElement(Z.a,{sm:6,md:3},l?r.a.createElement(pe,{id:parseInt(l,10),header:"Predicted",href:function(e){return"/categories/".concat(l,"/").concat(e)}}):null),r.a.createElement(Z.a,{sm:12,md:6}))}}]),t}(a.PureComponent),be=Object(i.b)(function(e){return{sort:e.config.sort}})(he),Ee=n(181),Oe=n(25),ve=n(93),ye=n(177),ge=n.n(ye),je=n(182),we=n.n(je),Ce=1,xe=function(e){function t(){var e,n;Object(I.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(F.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(r)))).state={gridWidth:Ce,gridHeight:Ce},n._setDimensionsOnState=function(){if(n.__isMounted){var e=Object(l.findDOMNode)(Object(ve.a)(Object(ve.a)(n))),t=e.offsetWidth,a=e.offsetHeight;n.setState({gridWidth:t||Ce,gridHeight:a||Ce})}},n}return Object(R.a)(t,e),Object(A.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!we()(this.props,e)||!we()(this.state,t)}},{key:"componentDidMount",value:function(){this.__isMounted=!0,this._setDimensionsOnState(),this._attachResizeEvent()}},{key:"componentWillMount",value:function(){var e=this.props.refreshRate;this._setDimensionsOnState=ge()(this._setDimensionsOnState,e)}},{key:"componentWillUnmount",value:function(){this.__isMounted=!1,window.removeEventListener("resize",this._setDimensionsOnState)}},{key:"_attachResizeEvent",value:function(){window.addEventListener?window.addEventListener("resize",this._setDimensionsOnState,!1):window.attachEvent?window.attachEvent("resize",this._setDimensionsOnState):window.onresize=this._setDimensionsOnState}},{key:"_getStyle",value:function(){return Object(u.a)({},this.props.containerStyle,{width:"100%",height:"100%"})}},{key:"render",value:function(){var e=this.state,t=e.gridWidth,n=e.gridHeight;return r.a.createElement("div",{style:this._getStyle()},r.a.createElement(Oe.Table,Object.assign({ref:"table"},this.props,{width:t,height:n})))}}]),t}(r.a.Component);xe.defaultProps={containerStyle:{},refreshRate:250};n(567),n(569);var ke=function(e){var t=e.count,n=e.sum,a=e.self,l=Object(S.a)(e,["count","sum","self"]),c=t>0?a?"bg-success":t>.75*n?"bg-danger":"bg-warning":"text-muted";return r.a.createElement(Oe.Cell,Object.assign({},l,{className:c}),t)},_e=Object(i.b)(function(e){return{labels:e.labels}})(function(e){var t=e.cls,n=e.labels,a=(e.dispatch,Object(S.a)(e,["cls","labels","dispatch"])),l=n.get(t.label)||t.label;return r.a.createElement(Oe.Cell,Object.assign({},a,{style:{textAlign:"left"}}),l)}),Le=function(e){function t(){return Object(I.a)(this,t),Object(F.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.confusion,t=e.count,n=e.matrix,a=e.classes;return r.a.createElement("div",{className:"Confusion"},r.a.createElement(xe,{rowHeight:30,headerHeight:30,footerHeight:30,rowsCount:a.length},r.a.createElement(Oe.Column,{align:"left",fixed:!0,width:150,allowCellsRecycling:!0,header:r.a.createElement(Oe.Cell,null,"\u25be actual | predicted \u25b8"),cell:function(e){var t=e.rowIndex;Object(S.a)(e,["rowIndex"]);return r.a.createElement(_e,{cls:a[t]})},footer:r.a.createElement(Oe.Cell,null,r.a.createElement("b",null,"\u03a3"))}),a.map(function(e,t){return r.a.createElement(Oe.Column,{align:"center",key:e.label,width:35,allowCellsRecycling:!0,header:r.a.createElement(_e,{cls:e}),cell:function(a){var l=a.rowIndex,c=Object(S.a)(a,["rowIndex"]);return r.a.createElement(ke,Object.assign({},c,{count:n[l][t],self:l===t,sum:e.tp+e.fn}))},footer:function(t){var n=Object(Ee.a)({},t);return r.a.createElement(Oe.Cell,n,e.tp+e.fp)}})}),r.a.createElement(Oe.Column,{align:"center",fixed:!0,width:50,header:r.a.createElement(Oe.Cell,null,"\u03a3"),allowCellsRecycling:!0,cell:function(e){var t=e.rowIndex,n=Object(S.a)(e,["rowIndex"]);return r.a.createElement(Oe.Cell,n,a[t].tp+a[t].fn)},footer:function(e){var n=Object(Ee.a)({},e);return r.a.createElement(Oe.Cell,n,t)}}),r.a.createElement(Oe.Column,{width:15})))}}]),t}(a.Component),Ne=Object(i.b)(function(e){return{confusion:e.confusion}})(Le);n(571),n(573),n(575);!function(){var e,t="/mlc-eval/example/iris";window.location.search.startsWith("?baseUrl=")&&(t=decodeURIComponent(window.location.search.slice(9))),L.dispatch((e=t+".cm",function(t){t({type:"FILE_LOADING",payload:{id:"confusion",url:e}}),fetch(e).then(function(e){return e.text()}).then(function(e){return t({type:"CONFUSION_LOAD",payload:e})}).then(function(e){return t({type:"FILE_LOADED",payload:{id:"confusion"}})}).catch(function(e){return console.log(e)})})),L.dispatch(function(e){return function(t){t({type:"FILE_LOADING",payload:{id:"labels",url:e}}),fetch(e).then(function(e){return e.text()}).then(function(e){return t({type:"LABELS_LOAD",payload:e})}).then(function(e){return t({type:"FILE_LOADED",payload:{id:"labels"}})}).catch(function(e){return console.log(e)})}}(t+".labels")),L.dispatch(function(e){return function(t){t({type:"FILE_LOADING",payload:{id:"model",url:e}}),fetch(e,{headers:{Range:"bytes=0-10000"}}).then(function(e){return e.text()}).then(function(e){var t=e.indexOf("\nw\n");return t<0&&(t=e.indexOf("\nSV\n")),e.slice(0,t)}).then(function(e){return t({type:"MODEL_LOAD",payload:e})}).then(function(e){return t({type:"FILE_LOADED",payload:{id:"model"}})}).catch(function(e){return console.log(e)})}}(t+".model"))}(),c.a.render(r.a.createElement(i.a,{store:L},r.a.createElement(N.a,null,r.a.createElement(Y,null,r.a.createElement(D.a,{path:"/",exact:!0,component:le}),r.a.createElement(D.a,{path:"/categories/:ida?/:idb?",component:be}),r.a.createElement(D.a,{path:"/confusion-matrix",component:Ne})))),document.getElementById("root"))}},[[289,2,1]]]);
//# sourceMappingURL=main.af0086e9.chunk.js.map